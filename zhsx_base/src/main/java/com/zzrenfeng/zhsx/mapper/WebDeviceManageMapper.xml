<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.zzrenfeng.zhsx.mapper.WebDeviceManageMapper" >
 
	<resultMap id="BaseResultMap"  type="com.zzrenfeng.zhsx.model.WebDeviceManage" >
		<result column="id" property="id" />
		<result column="device_code" property="deviceCode" />
		<result column="device_mac" property="deviceMac" />
		<result column="device_type" property="deviceType" />
		<result column="device_province" property="deviceProvince" />
		<result column="device_city" property="deviceCity" />
		<result column="device_area" property="deviceArea" />
		<result column="school_id" property="schoolId" />
		<result column="device_state" property="deviceState" />
		<result column="device_client_version_num" property="deviceClientVersionNum" />
		<result column="device_ip" property="deviceIp" />
		<result column="isvalid" property="isvalid" />
		<result column="create_time" property="createTime" />
		<result column="modify_time" property="modifyTime" />
		<result column="create_id" property="createId" />
		<result column="modify_id" property="modifyId" />
		<!-- only used in matern: findPageSelective -->
		<result column="bak1" property="bak1" />
		<result column="bak2" property="bak2" />
		<result column="bak3" property="bak3" />
	</resultMap>

	<sql id="Base_Column_List">
		wdm.id,device_code AS deviceCode,device_mac AS deviceMac,device_type AS deviceType,device_province AS deviceProvince,device_city AS deviceCity,device_area AS deviceArea,school_id AS schoolId,device_state AS deviceState,device_client_version_num AS deviceClientVersionNum,device_ip AS deviceIp,isvalid,create_time AS createTime,modify_time AS modifyTime,create_id AS createId,modify_id AS modifyId
	</sql>

	<select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.String" >
		select 
		<include refid="Base_Column_List" />
		from web_device_manage wdm
		where id = #{id}
	</select>

	<delete id="deleteByPrimaryKey" parameterType="java.lang.String" >
		delete from web_device_manage where id = #{id}
	</delete>


	<insert id="insert" parameterType="WebDeviceManage" >
		<selectKey keyProperty="id" order="BEFORE" resultType="java.lang.String">select uuid()</selectKey>
		insert into web_device_manage (id,device_code,device_mac,device_type,device_province,device_city,device_area,school_id,device_state,device_client_version_num,device_ip,isvalid,create_time,modify_time,create_id,modify_id)
		values (#{id},#{deviceCode},#{deviceMac},#{deviceType},#{deviceProvince},#{deviceCity},#{deviceArea},#{schoolId},#{deviceState},#{deviceClientVersionNum},#{deviceIp},#{isvalid},#{createTime},#{modifyTime},#{createId},#{modifyId})
	</insert>


	<update id="updateByPrimaryKeySelective" parameterType="WebDeviceManage" >
		update web_device_manage
		<set >
			<if test="id != null" >
				id = #{id},
			</if>
			<if test="deviceCode != null" >
				 device_code = #{deviceCode},
			</if>
			<if test="deviceMac != null" >
				 device_mac = #{deviceMac},
			</if>
			<if test="deviceType != null" >
				 device_type = #{deviceType},
			</if>
			<if test="deviceProvince != null" >
				 device_province = #{deviceProvince},
			</if>
			<if test="deviceCity != null" >
				 device_city = #{deviceCity},
			</if>
			<if test="deviceArea != null" >
				 device_area = #{deviceArea},
			</if>
			<if test="schoolId != null" >
				 school_id = #{schoolId},
			</if>
			<if test="deviceState != null" >
				 device_state = #{deviceState},
			</if>
			<if test="deviceClientVersionNum != null" >
				 device_client_version_num = #{deviceClientVersionNum},
			</if>
			<if test="deviceIp != null" >
				 device_ip = #{deviceIp},
			</if>
			<if test="isvalid != null" >
				 isvalid = #{isvalid},
			</if>
			<if test="createTime != null" >
				 create_time = #{createTime},
			</if>
			<if test="modifyTime != null" >
				 modify_time = #{modifyTime},
			</if>
			<if test="createId != null" >
				 create_id = #{createId},
			</if>
			<if test="modifyId != null" >
				 modify_id = #{modifyId}
			</if>
			
		</set>
		where id = #{id}
	</update>
	

	<update id="updateByPrimaryKey" parameterType="WebDeviceManage" >
		update web_device_manage
		set 
		device_code = #{deviceCode},
		device_mac = #{deviceMac},
		device_type = #{deviceType},
		device_province = #{deviceProvince},
		device_city = #{deviceCity},
		device_area = #{deviceArea},
		school_id = #{schoolId},
		device_state = #{deviceState},
		device_client_version_num = #{deviceClientVersionNum},
		device_ip = #{deviceIp},
		isvalid = #{isvalid},
		create_time = #{createTime},
		modify_time = #{modifyTime},
		create_id = #{createId},
		modify_id = #{modifyId}
		where id = #{id}
	</update>
	
	<sql id="Dynamic_Conditions">
		<where>
			1=1
			<if test="id != null" >
				and wdm.id = #{id}
			</if>
			<if test="deviceCode != null" >
				and device_code = #{deviceCode}
			</if>
			<if test="deviceMac != null" >
				and device_mac = #{deviceMac}
			</if>
			<if test="deviceType != null" >
				and device_type = #{deviceType}
			</if>
			<if test="deviceProvince != null" >
				and device_province = #{deviceProvince}
			</if>
			<if test="deviceCity != null" >
				and device_city = #{deviceCity}
			</if>
			<if test="deviceArea != null" >
				and device_area = #{deviceArea}
			</if>
			<if test="schoolId != null" >
				and school_id = #{schoolId}
			</if>
			<if test="deviceState != null" >
				and device_state = #{deviceState}
			</if>
			<if test="deviceClientVersionNum != null" >
				and device_client_version_num = #{deviceClientVersionNum}
			</if>
			<if test="deviceIp != null" >
				and device_ip = #{deviceIp}
			</if>
			<if test="isvalid != null" >
				and isvalid = #{isvalid}
			</if>
			<if test="createTime != null" >
				and create_time = #{createTime}
			</if>
			<if test="modifyTime != null" >
				and modify_time = #{modifyTime}
			</if>
			<if test="createId != null" >
				and create_id = #{createId}
			</if>
			<if test="modifyId != null" >
				and modify_id = #{modifyId}
			</if>
			order by s.schoolName
		</where>
	</sql>
	
	
	<select id="findSelective" parameterType="WebDeviceManage" resultType="WebDeviceManage">
<!-- 		select 
		<include refid="Base_Column_List" />
		from web_device_manage wdm
		<include refid="Dynamic_Conditions"/> -->
		select 
		<include refid="Base_Column_List" />, s.schoolName AS bak1
		from web_device_manage wdm
		LEFT JOIN sys_school s ON wdm.school_id= s.id
		<include refid="Dynamic_Conditions"/>
	</select>


	<select id="findPageSelective" parameterType="WebDeviceManage" resultType="WebDeviceManage">
		select 
		<include refid="Base_Column_List" />, s.schoolName AS bak1
		from web_device_manage wdm
		LEFT JOIN sys_school s ON wdm.school_id= s.id
		<include refid="Dynamic_Conditions"/>
	</select>
	
	
	<!-- 查询单条数据-->
    <parameterMap type="Map" id="schoolCountParams">
	    <parameter property="province" jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
	   	<parameter property="city" jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
	   	<parameter property="area" jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
	   	<parameter property="startTime" jdbcType="TIMESTAMP" javaType="java.util.Date" mode="IN"/>
	   	<parameter property="endTime" jdbcType="TIMESTAMP" javaType="java.util.Date" mode="IN"/>
	   	
	   	<parameter property="totaldevices" jdbcType="INTEGER" javaType="java.lang.Integer" mode="OUT"/>
	   	<parameter property="schooldevices" jdbcType="INTEGER" javaType="java.lang.Integer" mode="OUT"/>
	   	<parameter property="averageuserate" jdbcType="DOUBLE" javaType="java.lang.Double" mode="OUT"/>
	   	<parameter property="averageuselength" jdbcType="DOUBLE" javaType="java.lang.Double" mode="OUT"/>
    </parameterMap>
    <!-- 查询数据总量 -->
    <select id="getTotalSchool" parameterMap="schoolCountParams" statementType="CALLABLE" resultType="java.util.HashMap"> 
   		{call school_count_total(?,?,?,?,?,?,?,?,?)}
    </select>
	
	<parameterMap type="Map" id="schoolCountDetailParams">
		<parameter property="province" jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
	   	<parameter property="city" jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
	   	<parameter property="area" jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
	   	<parameter property="startTime" jdbcType="TIMESTAMP" javaType="java.util.Date" mode="IN"/>
	   	<parameter property="endTime" jdbcType="TIMESTAMP" javaType="java.util.Date" mode="IN"/>
	   	<parameter property="school_id" jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
	   	
	   	<parameter property="schoolName" jdbcType="VARCHAR" javaType="java.lang.String" mode="OUT"/>
	   	<parameter property="schoolTotaldevices" jdbcType="INTEGER" javaType="java.lang.Integer" mode="OUT"/>
	   	<parameter property="schoolUsedevices" jdbcType="INTEGER" javaType="java.lang.Integer" mode="OUT"/>
	   	<parameter property="schoolUserate" jdbcType="DOUBLE" javaType="java.lang.Double" mode="OUT"/>
	   	<parameter property="totaluselength" jdbcType="DOUBLE" javaType="java.lang.Double" mode="OUT"/>
	   	<parameter property="averageuselength" jdbcType="DOUBLE" javaType="java.lang.Double" mode="OUT"/>
    </parameterMap>
    <!-- 查询学校的详细信息 -->
    <select id="getdetailSchool" parameterMap="schoolCountDetailParams" statementType="CALLABLE" resultType="java.util.HashMap">
   		{call school_count_detail(?,?,?,?,?,?,?,?,?,?,?,?)}
    </select>
	
	<parameterMap type="Map" id="classCountDetailParams">
		<parameter property="device_province" jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
	   	<parameter property="device_city" jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
	   	<parameter property="device_area" jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
	  	<parameter property="school_id" jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
	   	<parameter property="dr_start_time" jdbcType="TIMESTAMP" javaType="java.util.Date" mode="IN"/>
	   	<parameter property="dr_end_time" jdbcType="TIMESTAMP" javaType="java.util.Date" mode="IN"/>
	   	<parameter property="class_id" jdbcType="VARCHAR" javaType="java.lang.String" mode="IN"/>
	   	
	   	<parameter property="className" jdbcType="VARCHAR" javaType="java.lang.String" mode="OUT"/>
	   	<parameter property="classTotaldevices" jdbcType="INTEGER" javaType="java.lang.Integer" mode="OUT"/>
	   	<parameter property="classUsedevices" jdbcType="INTEGER" javaType="java.lang.Integer" mode="OUT"/>
	   	<parameter property="classUserate" jdbcType="DOUBLE" javaType="java.lang.Double" mode="OUT"/>
	   	<parameter property="totaluselength" jdbcType="DOUBLE" javaType="java.lang.Double" mode="OUT"/>
	   	<parameter property="averageuselength" jdbcType="DOUBLE" javaType="java.lang.Double" mode="OUT"/>
   </parameterMap>
   <!-- 查询学校的详细信息 -->
   <select id="getDetailClass" parameterMap="classCountDetailParams" statementType="CALLABLE" resultType="java.util.HashMap">
   	{call class_count_detail(?,?,?,?,?,?,?,?,?,?,?,?,?)}
   </select>  
	
	<select id="selectDeviceCalssInfo" parameterType="java.lang.String" resultType="java.util.HashMap">
		SELECT
			dm.device_type AS deviceType,
			dm.device_state AS deviceState,
			dm.device_ip AS deviceIp,
			dm.device_mac AS deviceMac,
			dm.device_client_version_num AS deviceClientVersionNum,
			cd.class_id AS classid,
			sc.className AS classname,
			dm.device_province AS deviceProvince,
			sd1.`value` AS provinceName,
			dm.device_city AS deviceCity,
			sd2.`value` AS cityName,
			dm.device_area AS deviceArea,
			sd3.`value` AS areaName,
			dm.school_id AS schoolId,
			ss.schoolName AS schoolName,
			dm.modify_id AS teacherName
		FROM
			`web_device_manage` dm
		LEFT JOIN web_class_device cd ON dm.id = cd.device_id
		LEFT JOIN sys_classroom sc ON sc.id = cd.class_id
		LEFT JOIN sys_school ss ON ss.id = dm.school_id
		LEFT JOIN sys_dict sd1 ON dm.device_province = sd1.id
		LEFT JOIN sys_dict sd2 ON dm.device_city = sd2.id
		LEFT JOIN sys_dict sd3 ON dm.device_area = sd3.id
		WHERE
			dm.id = #{deviceId};
	</select>
	
	
	
	
	<!-- 是在线的设备，并且设备编码不能为空 -->
	<select id="selectAllDeviceCodeOnline" resultType="java.lang.String" >
		SELECT 
			DISTINCT(wdm.device_code)
		FROM
			web_device_manage wdm
		WHERE
			wdm.device_code <![CDATA[<>]]> ''
			AND wdm.device_state='0'
	</select>
	<select id="findTotal" resultType="java.util.HashMap" >
		SELECT 
		(SELECT COUNT(*) FROM web_device_manage wdm WHERE wdm.isvalid = '0') AS totalCount,
		(SELECT COUNT(*) FROM web_device_manage wdm WHERE wdm.isvalid = '0' AND wdm.device_state= '0') AS totalOnlineCount,
		(SELECT COUNT(*) FROM web_device_repair wdr WHERE wdr.repair_state= '0') AS totalRepairCount,
		(SELECT SUM(TIMESTAMPDIFF(HOUR,wdr.create_time,wdr.modify_time))/COUNT(*) FROM web_device_repair wdr WHERE wdr.repair_state= '0') avgRepairLong,
		(SELECT COUNT(*) FROM web_device_repair wdr WHERE wdr.isvalid ='0' AND wdr.repair_state<![CDATA[<>]]>'0') AS onRepairDevice
	</select>
	<!-- 每天设备上线数量  -->
	<select id="onlineDeviceEveryday" parameterType="java.util.Map" resultType="java.util.HashMap" >
		SELECT
			DATE_FORMAT(wdre.dr_start_time,'%Y-%m-%d') AS dates,
			COUNT(DISTINCT(wdre.device_mac)) AS counts
		FROM
			web_device_record wdre
		LEFT JOIN 
			web_device_manage wdm 
			ON wdre.device_code = wdm.device_code
		WHERE
			DATE_FORMAT(wdre.dr_start_time,'%Y-%m-%d') <![CDATA[>=]]> #{startTime}
		AND DATE_FORMAT(wdre.dr_start_time,'%Y-%m-%d') <![CDATA[<=]]> #{endTime}
		
		<if test="province != null" >
			and wdm.device_province = #{province}
		</if>
		<if test="city != null" >
			and wdm.device_city = #{city}
		</if>
		<if test="area != null" >
			and wdm.device_area = #{area}
		</if>
		GROUP BY
			DATE_FORMAT(wdre.dr_start_time,'%Y-%m-%d')
		ORDER BY 
		  DATE_FORMAT(wdre.dr_start_time,'%Y-%m-%d')
	</select>
	
	<select id="totalOnlineDeviceCount" parameterType="java.util.Map" resultType="java.util.HashMap" >
		SELECT
		(
			SELECT
				COUNT(*)
			FROM
				web_device_manage wdm
			WHERE
				wdm.isvalid = '0'
			<if test="province != null" >
				and wdm.device_province = #{province}
			</if>
			<if test="city != null" >
				and wdm.device_city = #{city}
			</if>
			<if test="area != null" >
				and wdm.device_area = #{area}
			</if>
		) AS totalCountByContion,
		(
			SELECT
				COUNT(*)
			FROM
				web_device_manage wdm
			WHERE
				wdm.isvalid = '0'
			AND wdm.device_state = '0'
			<if test="province != null" >
				and wdm.device_province = #{province}
			</if>
			<if test="city != null" >
				and wdm.device_city = #{city}
			</if>
			<if test="area != null" >
				and wdm.device_area = #{area}
			</if>
		) AS totalOnlineCountByContion
	</select>
	
	<!-- 按月统计 去掉了日期 -->
	<select id="everyDayAccessCount" parameterType="java.util.Map" resultType="java.util.HashMap" >
		<!-- SELECT
			DATE_FORMAT(wdm.create_time, '%Y-%m') AS dates,
			COUNT(*) AS counts
		FROM
			web_device_manage wdm
		WHERE 
			DATE_FORMAT(wdm.create_time,'%Y-%m-%d') <![CDATA[>=]]> #{startTime}
			AND DATE_FORMAT(wdm.create_time,'%Y-%m-%d') <![CDATA[<=]]> #{endTime}
			<if test="province != null" >
				and wdm.device_province = #{province}
			</if>
			<if test="city != null" >
				and wdm.device_city = #{city}
			</if>
			<if test="area != null" >
				and wdm.device_area = #{area}
			</if>
		GROUP BY
			DATE_FORMAT(wdm.create_time, '%Y-%m') -->
			
		
		SELECT
			tt.dates,
			(
				SELECT
					SUM(tt2.counts)
				FROM
					(
						SELECT
							DATE_FORMAT(wdm.create_time, '%Y-%m') AS dates,
							COUNT(*) AS counts
						FROM
							web_device_manage wdm
						WHERE 
							DATE_FORMAT(wdm.create_time,'%Y-%m-%d') <![CDATA[>=]]> #{startTime}
							AND DATE_FORMAT(wdm.create_time,'%Y-%m-%d') <![CDATA[<=]]> #{endTime}
							<if test="province != null" >
								and wdm.device_province = #{province}
							</if>
							<if test="city != null" >
								and wdm.device_city = #{city}
							</if>
							<if test="area != null" >
								and wdm.device_area = #{area}
							</if>
						GROUP BY
							DATE_FORMAT(wdm.create_time, '%Y-%m')
					) AS tt2
				WHERE<!-- 核心语句 -->
					tt2.dates<![CDATA[<=]]> tt.dates
			) AS counts
		FROM
			(
				SELECT
					DATE_FORMAT(wdm.create_time, '%Y-%m') AS dates,
					COUNT(*) AS counts
				FROM
					web_device_manage wdm
				WHERE 
					DATE_FORMAT(wdm.create_time,'%Y-%m-%d') <![CDATA[>=]]> #{startTime}
					AND DATE_FORMAT(wdm.create_time,'%Y-%m-%d') <![CDATA[<=]]> #{endTime}
					<if test="province != null" >
						and wdm.device_province = #{province}
					</if>
					<if test="city != null" >
						and wdm.device_city = #{city}
					</if>
					<if test="area != null" >
						and wdm.device_area = #{area}
					</if>
				GROUP BY
					DATE_FORMAT(wdm.create_time, '%Y-%m')
			) AS tt
		
		
			
	</select>
	<!-- 设备维修数量变化曲线 -->
	<select id="repairDeviceCount" parameterType="java.util.Map" resultType="java.util.HashMap" >
		<!-- SELECT
			DATE_FORMAT(wdr.create_time, '%Y-%m') AS dates,
			COUNT(wdr.id) AS counts
		FROM
			web_device_repair wdr
		LEFT JOIN sys_school sc ON wdr.repair_unit = sc.id
		WHERE
			DATE_FORMAT(wdr.create_time,'%Y-%m-%d') <![CDATA[>=]]> #{startTime}
			AND DATE_FORMAT(wdr.create_time,'%Y-%m-%d') <![CDATA[<=]]> #{endTime}
			<if test="province != null" >
				and sc.provinceId = #{province}
			</if>
			<if test="city != null" >
				and sc.cityId = #{city}
			</if>
			<if test="area != null" >
				and sc.countyId = #{area}
			</if>
		GROUP BY
			DATE_FORMAT(wdr.create_time, '%Y-%m')
		 -->
			
		SELECT
			tt.dates,
			(
				SELECT
					SUM(tt2.counts)
				FROM
					(
						SELECT
							DATE_FORMAT(wdr.create_time, '%Y-%m') AS dates,
							COUNT(wdr.id) AS counts
						FROM
							web_device_repair wdr
						LEFT JOIN sys_school sc ON wdr.school_id = sc.id
						WHERE
							DATE_FORMAT(wdr.create_time,'%Y-%m-%d') <![CDATA[>=]]> #{startTime}
							AND DATE_FORMAT(wdr.create_time,'%Y-%m-%d') <![CDATA[<=]]> #{endTime}
							<if test="province != null" >
								and sc.provinceId = #{province}
							</if>
							<if test="city != null" >
								and sc.cityId = #{city}
							</if>
							<if test="area != null" >
								and sc.countyId = #{area}
							</if>
						GROUP BY
							DATE_FORMAT(wdr.create_time, '%Y-%m')
					) AS tt2
				WHERE
					tt2.dates<![CDATA[<=]]> tt.dates
			) AS counts
		FROM
			(
				SELECT
					DATE_FORMAT(wdr.create_time, '%Y-%m') AS dates,
					COUNT(wdr.id) AS counts
				FROM
					web_device_repair wdr
				LEFT JOIN sys_school sc ON wdr.school_id = sc.id
				WHERE
					DATE_FORMAT(wdr.create_time,'%Y-%m-%d') <![CDATA[>=]]> #{startTime}
					AND DATE_FORMAT(wdr.create_time,'%Y-%m-%d') <![CDATA[<=]]> #{endTime}
					<if test="province != null" >
						and sc.provinceId = #{province}
					</if>
					<if test="city != null" >
						and sc.cityId = #{city}
					</if>
					<if test="area != null" >
						and sc.countyId = #{area}
					</if>
				GROUP BY
					DATE_FORMAT(wdr.create_time, '%Y-%m')
			) AS tt
	</select>
	<select id="usageRateRank" parameterType="java.util.Map" resultType="java.util.HashMap" >
		SELECT
			SUM(wdr.dr_using_long) / 60000 / DATEDIFF(#{endTime}, #{startTime}) AS  usageRate,
			COUNT(DISTINCT(wdm.device_mac)) AS countDeviceCode, 
			wdm.school_id,
			s.schoolName as school_name
		FROM
			web_device_manage wdm
		LEFT JOIN web_device_record wdr ON wdm.device_code = wdr.device_code
		LEFT JOIN sys_school s ON s.id = wdm.school_id
		WHERE
			DATE_FORMAT(
				wdr.dr_start_time,
				'%Y-%m-%d'
			) <![CDATA[>=]]> #{startTime}
		AND DATE_FORMAT(
			wdr.dr_start_time,
			'%Y-%m-%d'
		) <![CDATA[<=]]> #{endTime}
		
		<if test="province != null" >
			AND wdm.device_province = #{province}
		</if>
		<if test="city != null" >
			AND wdm.device_city = #{city}
		</if>
		<if test="area != null" >
			AND wdm.device_area = #{area}
		</if>
		
		GROUP BY
			wdm.school_id
		ORDER BY
			usageRate DESC
		LIMIT 10 	
	</select>
	
	<select id="findDeviceStateByClassId" parameterType="java.lang.String" resultType="java.lang.Integer" >
		SELECT
			wdm.device_state
		FROM
			web_class_device wcd
		LEFT JOIN web_device_manage wdm ON wcd.device_code = wdm.device_code
		WHERE
			wcd.classid = #{classId}
		<!-- AND wdm.device_type = '' 现在不做修改 -->
		LIMIT 1
	</select>
	
	<!-- 根据班级查询设备信息      只用到 id  和 typeValue   其它两个字段备用-->
	<select id="getDeviceByClassId" parameterType="java.lang.String" resultType="java.util.HashMap" >
	<!--  SELECT
		wdm.id AS id,
		wdm.device_mac AS deviceMac,
		sd.id AS dictId,
		sd.`value` AS typeValue
	 FROM
		web_class_device wcd
	 LEFT JOIN web_device_manage wdm ON wcd.device_id = wdm.id
	 LEFT JOIN sys_dict sd ON wdm.device_type = sd.id
	 WHERE
	    wcd.class_id = #{classId} -->
	 SELECT
		wdm.id AS id,
		wdm.device_mac AS deviceMac,
		sd.id AS dictId,
		sd.`value` AS typeValue
	 FROM
		web_class_device wcd
	 LEFT JOIN web_device_manage wdm ON wcd.device_id = wdm.id
	 LEFT JOIN sys_dict sd ON wdm.device_type = sd.id
	 WHERE
	    wcd.class_id = #{classId}
	</select>
	
	
	



</mapper>